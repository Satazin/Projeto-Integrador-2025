<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/pedidos"  text=""></ion-back-button>
    </ion-buttons>
    <ion-title>Meu Perfil</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding" [fullscreen]="true" class="fundo">
  <div class="container">
    <ion-card>
      <ion-card-content>
       <ion-avatar class="perfil-img" >
        <img [src]="fotoUrl || placeholderUrl"  />
       </ion-avatar>

       <input type="file" #fileInput (change)="onFileSelected($event)" style="display: none;">
       <ion-button class="edicao" (click)="fileInput.click()" color="dark" fill="clear" >
         <ion-icon name="create" slot="start"></ion-icon>
       </ion-button>

       <form (ngSubmit)="salvarPerfil()">
         <ion-input label="Nome de usuário" [(ngModel)]="usuario.nomeUsuario" labelPlacement="stacked" name="nomeUsuario"></ion-input>
         <ion-input label="E-mail" [(ngModel)]="usuario.email" labelPlacement="stacked" type="email" name="email" [readonly]="true"></ion-input>
         <ion-input label="Telefone" [(ngModel)]="usuario.telefone" labelPlacement="stacked" type="tel" name="telefone"></ion-input>
         <ion-input label="Endereço" [(ngModel)]="usuario.endereco" labelPlacement="stacked" name="endereco"></ion-input>
         
         <ion-button expand="block" class="ion-margin-top" type="submit" [disabled]="isUpdating" color="dark">
           Salvar
         </ion-button>

         <div *ngIf="isUpdating" class="ion-text-center">
           <ion-spinner name="crescent" color="dark"></ion-spinner>
           <p>Atualizando...</p>
         </div>
       </form>

       <ion-button expand="block" color="danger" class="ion-margin-top" (click)="logout()">Logout</ion-button>
      </ion-card-content>
    </ion-card>
  </div>
</ion-content>