<ion-header>
  <ion-toolbar class="header-toolbar">
    <ion-title class="header-title">Carrinho</ion-title>
    <ion-buttons slot="end">
      <ion-back-button defaultHref="/pedidos"></ion-back-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="carrinho-content">
  <ion-list *ngIf="(carrinhoItens$ | async) as itens; else noItems" class="carrinho-list">
    <ion-item *ngFor="let item of itens" class="carrinho-item">
      <ion-thumbnail slot="start">
        <img [src]="item.imagem" alt="{{ item.nome }}" />
      </ion-thumbnail>
      <ion-label>
        <h2 class="item-nome">{{ item.nome }}</h2>
        <p class="item-preco">R$ {{ item.preco | number:'1.2-2' }}</p>
        <p class="item-descricao">{{ item.descricao }}</p>
        <div class="item-quantidade">
          <ion-button fill="outline" size="small" (click)="decrementarQuantidade(item)">-</ion-button>
          <span>{{ item.quantidade }}</span>
          <ion-button fill="outline" size="small" (click)="incrementarQuantidade(item)">+</ion-button>
        </div>
        <p class="item-subtotal">Subtotal: R$ {{ item.preco * item.quantidade | number:'1.2-2' }}</p>
      </ion-label>
      <ion-button slot="end" color="danger" fill="clear" (click)="removerItem(item)">
        <ion-icon name="trash-outline"></ion-icon>
      </ion-button>
    </ion-item>
  </ion-list>

  <ng-template #noItems>
    <ion-item class="no-items">
      <ion-label>Seu carrinho est√° vazio.</ion-label>
    </ion-item>
  </ng-template>

  <ion-card class="total-card">
    <ion-card-content>
      <h3 class="total-title">Total</h3>
      <p class="total-value">R$ {{ (valorTotalCarrinho$ | async) | number:'1.2-2' }}</p>
      <div class="total-actions">
        <ion-button color="light" (click)="voltar()">Voltar</ion-button>
        <ion-button color="primary" (click)="continuar()">Continuar</ion-button>
      </div>
    </ion-card-content>
  </ion-card>
</ion-content>